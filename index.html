<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Харе Кришна</title>
  <link id="themeStylesheet" rel="stylesheet" href="style.css">
</head>
<body>
  <input type="range" id="speedSlider" min="1" max="3" value="2" step="1">
  <button id="switchStyle">Сменить стиль</button>
  <div class="centered">
    <div class="waviy">
      <span>Харе</span>
      <span>Кришна</span>
      <span>Харе</span>
      <span>Кришна</span>
      <br>
      <span>Кришна</span>
      <span>Кришна</span>
      <span>Харе</span>
      <span>Харе</span>
      <br>
      <span>Харе</span>
      <span>Рама</span>
      <span>Харе</span>
      <span>Рама</span>
      <br>
      <span>Рама</span>
      <span>Рама</span>
      <span>Харе</span>
      <span>Харе</span>
    </div>
  </div>

  <script>
    const spans = document.querySelectorAll('.waviy span');
    const slider = document.getElementById('speedSlider');
    const switchStyleBtn = document.getElementById('switchStyle');
    const themeLink = document.getElementById('themeStylesheet');

    const speedMap = {
      1: 1,
      2: 0.5,
      3: 0.35
    };

    let baseDuration = speedMap[slider.value];

    slider.addEventListener('input', () => {
      baseDuration = speedMap[slider.value];
    });

    switchStyleBtn.addEventListener('click', () => {
      if (themeLink.getAttribute('href') === 'style.css') {
        themeLink.setAttribute('href', 'style2.css');
      } else {
        themeLink.setAttribute('href', 'style.css');
      }
    });

    async function animateWords() {
      while (true) {
        for (let span of spans) {
          span.style.transition = `transform ${baseDuration / 2}s, color ${baseDuration / 2}s`;
          span.style.transform = 'scale(1.3)';
          span.style.color = 'orange';
          await new Promise(resolve => setTimeout(resolve, (baseDuration / 2) * 1000));

          span.style.transform = 'scale(1)';
          span.style.color = '#fff';
          await new Promise(resolve => setTimeout(resolve, (baseDuration / 2) * 1000));
        }
      }
    }

    animateWords();
  </script>
</body>
</html>
